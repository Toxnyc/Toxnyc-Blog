<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel</title>

<style>
.container {
    width: 280px;
    height: 250px;
    position: fixed;
    bottom: 0;
    right: 0;
    background: #000000;

    /* üîë ISSO √â ESSENCIAL */
    transition: bottom 0.3s ease;
}

.bot, .bot1 {
    position: absolute;
    right: 4px;
    top: 4px;

    outline: none;
    background: linear-gradient(180deg, #37E7FF 0%, #0047FF 50%, #46DEFF 100%);
    color: #fff;
    text-shadow: 0px -1px 0px rgba(0, 0, 0, .8), 0px 1px 0px rgba(255, 255, 255, .4);
}

.bot1 {
    display: none;
}

button {
    font-size: 20px;
    cursor: pointer;
}


.wrapper {
    display: grid 5vh 20vh 4vh 5vh;
    width: 28vh;
    height: 40vh;

    color: #fff;
}

.details {
    display: flex;
    align-items: center;
    flex-direction: column;
    justify-content: center;
}

.slider_containertop {
    /*background-color: #9a1d86;*/
    display: grid;
    grid-template-columns: 8vh 20vh;


    height: 5vh;
    width: 30vh;
}

.slider_containertop input {
    margin: auto 0;
    width: 100%;
    display: flex;
    float: right;
}

.iconvolume {
    display: flex;

    margin: 1vh;
    width: 3vh;
    height: 3vh;
    margin: auto;

    background-image: url(osr/packages/audioicon.png);
    background-size: cover;
    image-rendering: pixelated;
}

.track-art {

    width: 15vh;
    height: 15vh;
    border: 2px solid #FFFAFA;
    background-size: cover;
    background-position: center;
}



.track-name {
    /*background-color: blueviolet;*/
    font-size: 1rem;
}

.buttons {
    /*background-color: #e09627;*/
    display: flex;
    justify-content: space-around;

    width: 28vh;
    height: 5vh;

}

.buttons div {
    background-color: transparent;
    margin: auto;
    width: 3vh;
    height: 3vh;
}

.prev-track div {
    background-image: url(osr/packages/previcon.png);
    background-size: cover;
    image-rendering: pixelated;
    width: 100%;
    height: 100%;
}

.pause {
    background-image: url(osr/packages/pauseicon.png);
    background-size: cover;
    image-rendering: pixelated;

    width: 100%;
    height: 100%;
}

.play {
    background-image: url(osr/packages/playicon.png);
    background-size: cover;
    image-rendering: pixelated;
    width: 100%;
    height: 100%;
}

.next-track div {
    background-image: url(osr/packages/nexticon.png);
    background-size: cover;
    image-rendering: pixelated;
    width: 100%;
    height: 100%;
}

.slider_container {
    display: flex;
    justify-content: center;
    align-items: center;
}

.seek_slider,
.volume_slider {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    height: 5px;
    background: rgb(23, 23, 31);
}

.seek_slider::-webkit-slider-thumb,
.volume_slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url(osr/packages/gifs/core.gif);
    background-size: cover;
    image-rendering: pixelated;
    width: 20px;
    height: 20px;

    cursor: grab;

}

.seek_slider {
    width: 60%;
}

.volume_slider {
    width: 70%;
}


</style>
</head>

<body>

<div class="container" id="container">

    <div class="bot">
        <button id="btnPlus">‚ô¨</button>
    </div>

    <div class="bot1">
        <button id="btnMinus">‚ô¨</button>
    </div>

                        <div class="player">
                            <div class="wrapper">
                                <div class="details">

                                    <div class="slider_containertop">
                                        <div class="iconvolume"></div>
                                        <input type="range" min="0" max="100" value="99" class="volume_slider"
                                            onchange="setVolume()">
                                    </div>
                                    <div class="track-art"></div>
                                    <div class="track-name">Track Name</div>

                                </div>

                                <div class="slider_container">
                                    <div class="current-time">00:00</div>
                                    <input type="range" min="1" max="100" value="0" class="seek_slider"
                                        onchange="seekTo()">
                                    <div class="total-duration">00:00</div>
                                </div>


                                <div class="buttons">

                                    <div class="prev-track" onclick="prevTrack()">
                                        <div></div>
                                    </div>
                                    <div class="playpause-track" onclick="playpauseTrack()">
                                        <div class="play"></div>
                                    </div>
                                    <div class="next-track" onclick="nextTrack()">
                                        <div></div>
                                    </div>

                                </div>

                            </div>
                        </div>

</div>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const container = document.getElementById("container");
    const btnPlus = document.getElementById("btnPlus");
    const btnMinus = document.getElementById("btnMinus");
    const bot = document.querySelector(".bot");
    const bot1 = document.querySelector(".bot1");

    // Esconder
    btnPlus.addEventListener("click", function () {
        bot.style.display = "none";
        bot1.style.display = "block";
        container.style.bottom = "-211px"; // agora sai de verdade
    });

    // Mostrar
    btnMinus.addEventListener("click", function () {
        bot1.style.display = "none";
        bot.style.display = "block";
        container.style.bottom = "0";
    });

});

// Sele√ß√£o dos elementos do DOM
let track_name = document.querySelector('.track-name');
let playpause_btn = document.querySelector('.playpause-track');
let next_btn = document.querySelector('.next-track');
let prev_btn = document.querySelector('.prev-track');
let seek_slider = document.querySelector('.seek_slider');
let volume_slider = document.querySelector('.volume_slider');
let curr_time = document.querySelector('.current-time');
let total_duration = document.querySelector('.total-duration');

// Vari√°veis principais
let track_index = 0;
let isPlaying = false;
let updateTimer;
let curr_track = new Audio(); // Inicializa o objeto de √°udio

// Lista de m√∫sicas
const music_list = [
    {
        name: 'Too old to be cool - jaspertine',
        music: 'osr/packages/music/jaspertine_-_Too_old_to_be_cool_8.mp3',
        image: 'osr/packages/music/img/jaspertine.jpg'
    },
    {
        name: 'still i - sleeperspaceborn',
        music: 'osr/packages/music/sleeperspaceborn_-_still_i.mp3',
        image: 'osr/packages/music/img/sleeperspaceborn.png'
    },
    {
        name: 'Venom - echo_orbit',
        music: 'osr/packages/music/echo_orbit_-_Venom.mp3',
        image: 'osr/packages/music/img/echo_orbit.jpg'
    },
    {
        name: 'redlightriot - sleeperspaceborn',
        music: 'osr/packages/music/sleeperspaceborn_-_redlightriot_2.mp3',
        image: 'osr/packages/music/img/sleeperspaceborn.png'
    },
    {
        name: 'never grow old. - sleeperspaceborn',
        music: 'osr/packages/music/sleeperspaceborn_-_never_grow_old._1.mp3',
        image: 'osr/packages/music/img/sleeperspaceborn.png'
    },
    {
        name: 'dark rose - sleeperspaceborn',
        music: 'osr/packages/music/sleeperspaceborn_-_dark_rose.mp3',
        image: 'osr/packages/music/img/sleeperspaceborn.png'
    },
    {
        name: 'Sacred Light - Aussens@iter',
        music: 'osr/packages/music/tobias_weber_-_Sacred_Light.mp3',
        image: 'osr/packages/music/img/Aussens_iter.jpg'
    },
    {
        name: 'Sound Effects Volume One - Apoxode',
        music: 'osr/packages/music/Apoxode_-_Sound_Effects_Volume_One.mp3',
        image: 'osr/packages/music/img/apoxode.jpg'
    }
];

// Carrega a m√∫sica inicial
loadTrack(track_index);

// Fun√ß√£o para carregar uma m√∫sica
function loadTrack(track_index) {
    clearInterval(updateTimer);
    reset();

    // Atualiza o objeto de √°udio com a m√∫sica atual
    curr_track.src = music_list[track_index].music;
    curr_track.load();

    // Atualiza o nome da m√∫sica
    track_name.textContent = music_list[track_index].name;

    // Atualiza a imagem do √°lbum
    let track_art = document.querySelector('.track-art');
    track_art.style.backgroundImage = `url('${music_list[track_index].image}')`;

    // Configura o temporizador de atualiza√ß√£o do tempo
    updateTimer = setInterval(setUpdate, 1000);

    // Avan√ßa automaticamente para a pr√≥xima m√∫sica ao final da atual
    curr_track.addEventListener('ended', nextTrack);
}


// Reseta os valores dos elementos de tempo e slider
function reset() {
    curr_time.textContent = "00:00";
    total_duration.textContent = "00:00";
    seek_slider.value = 0;
}

// Controla o bot√£o de play/pause
function playpauseTrack() {
    isPlaying ? pauseTrack() : playTrack();
}

// Inicia a reprodu√ß√£o
function playTrack() {
    curr_track.play();
    isPlaying = true;
    playpause_btn.innerHTML = '<div class="pause"></div>';
}

// Pausa a reprodu√ß√£o
function pauseTrack() {
    curr_track.pause();
    isPlaying = false;
    playpause_btn.innerHTML = '<div class="play"></div>';
}

// Avan√ßa para a pr√≥xima m√∫sica
function nextTrack() {
    track_index = (track_index + 1) % music_list.length;
    loadTrack(track_index);
    playTrack();
}

// Retorna √† m√∫sica anterior
function prevTrack() {
    track_index = (track_index - 1 + music_list.length) % music_list.length;
    loadTrack(track_index);
    playTrack();
}

// Atualiza a posi√ß√£o do slider de progresso e os tempos
function setUpdate() {
    let seekPosition = 0;
    if (!isNaN(curr_track.duration)) {
        seekPosition = curr_track.currentTime * (100 / curr_track.duration);
        seek_slider.value = seekPosition;

        let currentMinutes = Math.floor(curr_track.currentTime / 60);
        let currentSeconds = Math.floor(curr_track.currentTime - currentMinutes * 60);
        let durationMinutes = Math.floor(curr_track.duration / 60);
        let durationSeconds = Math.floor(curr_track.duration - durationMinutes * 60);

        if (currentSeconds < 10) { currentSeconds = "0" + currentSeconds; }
        if (durationSeconds < 10) { durationSeconds = "0" + durationSeconds; }
        if (currentMinutes < 10) { currentMinutes = "0" + currentMinutes; }
        if (durationMinutes < 10) { durationMinutes = "0" + durationMinutes; }

        curr_time.textContent = currentMinutes + ":" + currentSeconds;
        total_duration.textContent = durationMinutes + ":" + durationSeconds;
    }
}

// Ajusta o volume
function setVolume() {
    curr_track.volume = volume_slider.value / 100;
}

// Controla a posi√ß√£o da reprodu√ß√£o
function seekTo() {
    let seekTo = curr_track.duration * (seek_slider.value / 100);
    curr_track.currentTime = seekTo;
};

</script>

</body>
</html>
